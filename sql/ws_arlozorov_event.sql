-- phpMyAdmin SQL Dump
-- version 3.4.11.1deb2
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generato il: Mag 09, 2014 alle 12:34
-- Versione del server: 5.1.73
-- Versione PHP: 5.3.3-7+squeeze19

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `ws_arlozorov`
--

-- --------------------------------------------------------

--
-- Struttura della tabella `t_event`
--

CREATE TABLE IF NOT EXISTS `t_event` (
  `id` int(11) NOT NULL,
  `event` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dump dei dati per la tabella `t_event`
--

INSERT INTO `t_event` (`id`, `event`) VALUES
(0, '---'),
-- 1 - 32 EL SET
(1, 'clear'),
(2, 'Start elevator cycle'),
(3, 'Start levelling, position reached'),
(4, 'Start elevator locking'),
(5, 'Start closing locking pin 1'),
(6, 'Start opening locking pin 1'),
(7, 'Start closing locking pin 2'),
(8, 'Start opening locking pin 2'),
(9, 'Start closing locking pin 3'),
(10, 'Start opening locking pin 3'),
(11, 'Start closing locking pin 4'),
(12, 'Start opening locking pin 4'),
(13, 'Locking pin 1 opened limitswitch EOM1 is ON'),
(14, 'Locking pin 1 closed limitswitch EZM1 is ON'),
(15, 'Locking pin 2 opened limitswitch EOM2 is ON'),
(16, 'Locking pin 2 closed limitswitch EZM2 is ON'),
(17, 'Locking pin 3 opened limitswitch EOM3 is ON'),
(18, 'Locking pin 3 closed limitswitch EZM3 is ON'),
(19, 'Locking pin 4 opened limitswitch EOM4 is ON'),
(20, 'Locking pin 4 closed limitswitch EZM4 is ON'),
(21, 'Higher level position reached (EFA)'),
(22, 'Lower level position reached (EFB)'),
(23, 'Entry/Exit level position reached (EXPV)'),
(24, 'Level position reached (EXV)'),
(25, 'Hoisting motor is ON'),
(26, 'Hoisting motor brake contactor 1 is ON'),
(27, 'Hoisting motor brake contactor 2 is ON'),
(28, ''),
(29, ''),
(30, ''),
(31, ''),
(32, ''),
-- 33 - 64 EL RESET
(33, 'Elevator cycle completed'),
(34, 'Stop elevator cycle (2)'),
(35, 'Stop levelling, position reached'),
(36, 'Stop elevator locking'),
(37, 'Stop closing locking pin 1'),
(38, 'Stop opening locking pin 1'),
(39, 'Stop closing locking pin 2'),
(40, 'Stop opening locking pin 2'),
(41, 'Stop closing locking pin 3'),
(42, 'Stop opening locking pin 3'),
(43, 'Stop closing locking pin 4'),
(44, 'Stop opening locking pin 4'),
(45, 'Locking pin 1 opened limitswitch EOM1 is OFF'),
(46, 'Locking pin 1 closed limitswitch EZM1 is OFF'),
(47, 'Locking pin 2 opened limitswitch EOM2 is OFF'),
(48, 'Locking pin 2 closed limitswitch EZM2 is OFF'),
(49, 'Locking pin 3 opened limitswitch EOM3 is OFF'),
(50, 'Locking pin 3 closed limitswitch EZM3 is OFF'),
(51, 'Locking pin 4 opened limitswitch EOM4 is OFF'),
(52, 'Locking pin 4 closed limitswitch EZM4 is OFF'),
(53, ''),
(54, ''),
(55, ''),
(56, ''),
(57, 'Hoisting motor is OFF'),
(58, 'Hoisting motor brake contactor 1 is OFF'),
(59, 'Hoisting motor brake contactor 2 is OFF'),
(60, ''),
(61, ''),
(62, ''),
(63, ''),
(64, ''),
-- 65 - 96 SH SET
(65, 'clear'),
(66, 'Start shuttle travelling cycle'),
(67, 'Shuttle travelling motors are ON'),
(68, 'Shuttle travelling motors brake are ON'),
(69, 'Shuttle travelling motors FWD'),
(70, 'Shuttle travelling motors BWD'),
(71, 'Shuttle rotation position sensor EXHR is ON ( 1st check )'),
(72, 'Shuttle rotation position sensor EXHR is ON ( 2nd check )'),
(73, 'Shuttle rotation position ( Encoder check )'),
(74, 'Shuttle entry position ( Encoder check )'),
(75, 'Shuttle exit position ( Encoder check )'),
(76, ''),
(77, ''),
(78, ''),
(79, ''),
(80, 'clear'),
(81, 'Start shuttle rotation cycle towards transfer'),
(82, 'Start shuttle rotation cycle towards entry'),
(83, 'Start shuttle rotation cycle towards exit'),
(84, 'Shuttle rotation motor is ON'),
(85, 'Shuttle rotation motor brake is ON'),
(86, 'Shuttle rotation motor FWD'),
(87, 'Shuttle rotation motor BWD'),
(88, 'Shuttle transfer position sensor EXD is ON'),
(89, 'Transfer rotation position reached'),
(90, 'Entry rotation position reached'),
(91, 'Exit rotation position reached'),
(92, ''),
(93, ''),
(94, ''),
(95, ''),
(96, ''),
-- 97 - 128 SH RESET
(97, 'Shuttle travelling cycle completed'),
(98, 'Stop shuttle travelling cycle'),
(99, 'Shuttle travelling motors are OFF'),
(100, 'Shuttle travelling motors brake are OFF'),
(101, ''),
(102, ''),
(103, 'Shuttle rotation position sensor EXHR is OFF ( 1st check )'),
(104, 'Shuttle rotation position sensor EXHR is OFF ( 2nd check )'),
(105, ''),
(106, ''),
(107, ''),
(108, ''),
(109, ''),
(110, ''),
(111, ''),
(112, 'Shuttle rotation cycle completed'),
(113, 'Stop shuttle rotation cycle towards transfer'),
(114, 'Stop shuttle rotation cycle towards entry'),
(115, 'Stop shuttle rotation cycle towards exit'),
(116, 'Shuttle rotation motor is OFF'),
(117, 'Shuttle rotation motor brake is OFF'),
(118, ''),
(119, ''),
(120, 'Shuttle transfer position sensor EXD is OFF'),
(121, ''),
(122, ''),
(123, ''),
(124, ''),
(125, ''),
(126, ''),
(127, ''),
(128, ''),
-- 129 - 160 C SET
(129, 'clear'),
(130, 'start centering cycle'),
(131, 'start moving towards stall'),
(132, 'start moving towards shuttle'),
(133, ''),
(134, ''),
(135, 'silomat low limitswitch ES is ON'),
(136, 'silomat high limitswitch EH is ON'),
(137, 'silomat back centering closed limitswitch RCH is ON'),
(138, 'silomat front centering stop limitswitch REAV is ON'),
(139, 'silomat back centering stop limitswitch REAH is ON'),
(140, 'silomat front centering closed limitswitch RCV is ON'),
(141, ''),
(142, ''),
(143, ''),
(144, ''),
(145, ''),
(146, ''),
(147, ''),
(148, ''),
(149, ''),
(150, ''),
(151, ''),
(152, ''),
(153, ''),
(154, ''),
(155, ''),
(156, ''),
(157, ''),
(158, ''),
(159, ''),
(160, ''),
-- 161 - 192 C RESET
(161, 'silomat cycle completed'),
(162, 'stop centering cycle"'),
(163, 'stop moving towards stall'),
(164, 'stop moving towards shuttle'),
(165, ''),
(166, ''),
(167, 'silomat low limitswitch ES is OFF'),
(168, 'silomat high limitswitch EH is OFF'),
(169, 'silomat back centering closed limitswitch RCH is OFF'),
(170, 'silomat front centering stop limitswitch REAV is OFF'),
(171, 'silomat back centering stop limitswitch REAH is OFF'),
(172, 'silomat front centering closed limitswitch RCV is OFF'),
(173, ''),
(174, ''),
(175, ''),
(176, ''),
(177, ''),
(178, ''),
(179, ''),
(180, ''),
(181, ''),
(182, ''),
(183, ''),
(184, ''),
(185, ''),
(186, ''),
(187, ''),
(188, ''),
(189, ''),
(190, ''),
(191, ''),
(192, ''),
-- 193 - 224 EU SET
(193, 'clear'),
(194, 'start vehicle measurement'),
(195, 'vehicle in position'),
(196, 'vehicle refused'),
(197, 'Move forward'),
(198, 'Stop'),
(199, 'Move backward'),
(200, 'Move left'),
(201, 'Move right'),
(202, 'Green light is ON'),
(203, 'Virtual Garage is available'),
(204, ''),
(205, 'Vehicle maximum right width sensor is ON'),
(206, 'Vehicle maximum left width sensor is ON'),
(207, 'Vehicle presence sensor is ON'),
(208, 'Vehicle maximum front length sensor is ON'),
(209, 'Vehicle maximum back length sensor is ON'),
(210, 'Vehicle maximum height sensor is ON'),
(211, 'Vehicle height sensor is ON'),
(212, 'Vehicle wheel front position detection'),
(213, 'Vehicle wheel back position detection'),
(214, 'Vehicle wheel right direction sensor is ON'),
(215, 'Vehicle wheel left direction sensor is ON'),
(216, 'Low vehicle detected'),
(217, 'High vehicle detected'),
(218, ''),
(219, ''),
(220, ''),
(221, ''),
(222, ''),
(223, ''),
(224, ''),
-- 224 - 256 EU RESET
(225, 'vehicle measurement cycle completed'),
(226, 'start vehicle measurement'),
(227, 'vehicle in position'),
(228, 'vehicle refused'),
(229, 'Move forward'),
(230, 'Stop'),
(231, 'Move backward'),
(232, 'Move left'),
(233, 'Move right'),
(234, 'Red light is ON'),
(235, ''),
(236, ''),
(237, 'Vehicle maximum right width detection'),
(238, 'Vehicle maximum left width detection'),
(239, 'Vehicle presence detection'),
(240, 'Vehicle maximum front length detection'),
(241, 'Vehicle maximum back length detection'),
(242, 'Vehicle maximum height detection'),
(243, 'Vehicle height detection'),
(244, 'Vehicle wheel front position is OFF'),
(245, 'Vehicle wheel back position is OFF'),
(246, 'Vehicle wheel right direction detection'),
(247, 'Vehicle wheel left direction detection'),
(248, ''),
(249, ''),
(250, ''),
(251, ''),
(252, ''),
(253, ''),
(254, ''),
(255, ''),
(256, '');

-- --------------------------------------------------------

--
-- Struttura della tabella `t_diag`
--

CREATE TABLE IF NOT EXISTS `t_diag` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `system` int(11) NOT NULL,
  `device` int(11) NOT NULL,
  `mode` int(11) NOT NULL,
  `operation` int(11) NOT NULL,
  `stall` int(11) NOT NULL,
  `card` int(11) NOT NULL,
  `size` int(11) NOT NULL,
  `alarm` int(11) NOT NULL,
  `event` int(11) NOT NULL,
  `date` date NOT NULL,
  `time` time NOT NULL,
  `elapsed` int(11) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `system` (`system`),
  KEY `device` (`device`),
  KEY `mode` (`mode`),
  KEY `operation` (`operation`),
  KEY `alarm` (`alarm`),
  KEY `event` (`event`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1;

-- --------------------------------------------------------

--
-- Limiti per la tabella `t_diag`
--
ALTER TABLE `t_diag`
  ADD CONSTRAINT `t_diag_ibfk_1` FOREIGN KEY (`system`) REFERENCES `ws_aps`.`t_system` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `t_diag_ibfk_2` FOREIGN KEY (`device`) REFERENCES `t_device` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `t_diag_ibfk_3` FOREIGN KEY (`mode`) REFERENCES `t_mode` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `t_diag_ibfk_4` FOREIGN KEY (`operation`) REFERENCES `t_operation` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `t_diag_ibfk_5` FOREIGN KEY (`alarm`) REFERENCES `t_alarm` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `t_diag_ibfk_6` FOREIGN KEY (`event`) REFERENCES `t_event` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
  